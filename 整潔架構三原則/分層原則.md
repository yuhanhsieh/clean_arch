# 整潔的架構
![clean_arch.jpg](/img/clean_arch.jpg)
## 關注點分離
整潔的架構透過將軟體分層來實現這種分離。
## 整潔架構的四個預設階層
### Entity, Enterprise Business Rules（實體層）
即是 OOAD 的 domain model object，乘載業務概念包含的資料與行為。例如：訂單的資料，帳款的收入支出行為規則。
實體可以是企業級的關鍵業務規則，可以是具有方法的物件（充血的 model），也可以是一組資料結構和函式（貧血的 model）。
### Use Case, Application Business Rules（使用案例層）
此層的軟體就是把 Use Case/User Story Document 或驗收測試案例上的情境用程式碼寫出來，它編排實體之間的資料流，並指揮這些實體使用他們的關鍵業務規則來實現使用案例的目標。
### Interface Adapter（介面轉換層）
此層中的軟體是一組轉接器，可以將資料從最適合於使用案例和實體的格式轉換成最適合於某些外部代理的格式，例如：資料庫或Web。
### Detail, Framework and Drivers
此層的軟體包含所有細節，例如DA的實作，各種前後端的框架、Web Service等等。
## 依賴規則
> 原始碼依賴關係只能指向內部，朝向更高層級的策略

內圈對外圈一無所知，外圈的資料格式不能被內圈使用。我們不希望外圈的任何東西影響內圈。

四圈只是一個示意，可以隨著需要加入新的層級，原則就是程式碼的相依關係永遠要指向內部。越往內移動，越抽象。
